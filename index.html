<!doctype html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>STEAM –ù–∞–≤–∏–≥–∞—Ü–∏—è</title>
    <style>
      :root { --bg:#0b1220; --panel:#111a2e; --card:#0f1930; --text:#e8eefc; --muted:#a9b7db; --accent:#6aa7ff; }
      * { box-sizing: border-box; }
      body { margin:0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial; background:var(--bg); color:var(--text); }
      .app { display:flex; min-height:100vh; }
      .sidebar { width: 280px; background:var(--panel); padding:16px; border-right: 1px solid rgba(255,255,255,.08); }
      .brand { font-weight:700; letter-spacing:.2px; margin-bottom:14px; }
      .sub { color:var(--muted); font-size:13px; margin-bottom:14px; line-height:1.35; }
      .nav { display:flex; flex-direction:column; gap:8px; }
      .btn {
        width:100%; text-align:left; padding:12px 12px; border-radius:12px;
        border: 1px solid rgba(255,255,255,.10);
        background: rgba(255,255,255,.04); color:var(--text); cursor:pointer;
        display:flex; justify-content:space-between; align-items:center;
      }
      .btn:hover { border-color: rgba(106,167,255,.45); }
      .btn.active { outline: 2px solid rgba(106,167,255,.55); background: rgba(106,167,255,.10); }
      .tag { font-size:12px; color:var(--muted); }
      .main { flex:1; padding:18px; }
      .top { display:flex; gap:10px; align-items:center; justify-content:space-between; margin-bottom:14px; }
      .title { font-size:18px; font-weight:700; }
      .pill { padding:8px 10px; border-radius:999px; border:1px solid rgba(255,255,255,.12); color:var(--muted); font-size:12px; }
      .card {
        background: var(--card);
        border: 1px solid rgba(255,255,255,.10);
        border-radius:16px;
        padding:14px;
      }
      .cards { display:grid; grid-template-columns: 1fr; gap:12px; }
      .row { display:flex; gap:10px; align-items:center; justify-content:space-between; }
      .muted { color:var(--muted); font-size:13px; line-height:1.45; }
      .small { font-size:12px; color:var(--muted); margin-top:8px; }
      code { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; }
      @media (max-width: 820px) {
        .sidebar { width: 220px; }
      }
      @media (max-width: 650px) {
        .app { flex-direction: column; }
        .sidebar { width:100%; border-right:none; border-bottom: 1px solid rgba(255,255,255,.08); }
      }
    </style>
  </head>
  <body>
    <div class="app">
      <aside class="sidebar">
        <div class="brand">üìö STEAM –ù–∞–≤–∏–≥–∞—Ü–∏—è</div>
        <div class="sub">–ë–æ–∫–æ–≤–æ–µ –º–µ–Ω—é. –°–µ–π—á–∞—Å –ø–æ–¥–∫–ª—é—á–∞–µ–º API (Railway). –î–∞–ª—å—à–µ –≤—ã–≤–µ–¥–µ–º —É—Ä–æ–∫–∏ –∏ —Å—Å—ã–ª–∫–∏.</div>

        <nav class="nav" id="nav"></nav>

        <div class="small" id="tgHint"></div>
        <div class="small" id="apiHint"></div>
      </aside>

      <main class="main">
        <div class="top">
          <div class="title" id="screenTitle">–ó–∞–≥—Ä—É–∑–∫–∞‚Ä¶</div>
          <div class="pill" id="pill">offline</div>
        </div>

        <div class="cards" id="content"></div>
      </main>
    </div>

    <script>
      // ‚úÖ –¢–≤–æ–π Railway API
      const API_URL = "https://steam-nav-bot-production.up.railway.app";

      const sections = [
        { key: "prep", label: "üß© –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç–µ–ª—å–Ω—ã–π –∫—É—Ä—Å", desc: "–£—Ä–æ–∫–∏ —Å –Ω—É–ª—è: –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ STEAM." },
        { key: "steam", label: "üöÄ –ö—É—Ä—Å STEAM", desc: "–û—Å–Ω–æ–≤–Ω–æ–π –∫—É—Ä—Å, –º–æ–¥—É–ª–∏ –∏ –ø—Ä–∞–∫—Ç–∏–∫–∞." },
        { key: "news", label: "üóû –ù–æ–≤–æ—Å—Ç–∏", desc: "–ê–Ω–æ–Ω—Å—ã, –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è, —Å–æ–±—ã—Ç–∏—è." },
        { key: "links", label: "üîó –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏", desc: "–†–µ—Å—É—Ä—Å—ã, —Å–µ—Ä–≤–∏—Å—ã, –º–∞—Ç–µ—Ä–∏–∞–ª—ã." },
      ];

      const navEl = document.getElementById("nav");
      const contentEl = document.getElementById("content");
      const titleEl = document.getElementById("screenTitle");
      const pillEl = document.getElementById("pill");
      const tgHintEl = document.getElementById("tgHint");
      const apiHintEl = document.getElementById("apiHint");

      function setActive(key) {
        document.querySelectorAll(".btn").forEach(b => b.classList.toggle("active", b.dataset.key === key));
      }

      function renderSection(key) {
        const s = sections.find(x => x.key === key) || sections[0];
        titleEl.textContent = s.label;

        const cards = [
          {
            title: "–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –≥–æ—Ç–æ–≤–∞ ‚úÖ",
            body: "–≠—Ç–æ—Ç —ç–∫—Ä–∞–Ω ‚Äî WebApp –≤–Ω—É—Ç—Ä–∏ Telegram. –°–ª–µ–¥—É—é—â–∏–π —à–∞–≥ ‚Äî –≤—ã–≤–æ–¥ –¥–∞–Ω–Ω—ã—Ö –∏–∑ API: —É—Ä–æ–∫–∏, –Ω–æ–≤–æ—Å—Ç–∏, —Å—Å—ã–ª–∫–∏."
          },
          {
            title: "API –ø–æ–¥–∫–ª—é—á—ë–Ω",
            body: `API_URL: ${API_URL}\n–ü—Ä–æ–≤–µ—Ä—å: /health –∏ /meta`
          },
          {
            title: "–ß—Ç–æ –±—É–¥–µ—Ç –¥–∞–ª—å—à–µ",
            body: "‚Ä¢ —Å–ø–∏—Å–æ–∫ —É—Ä–æ–∫–æ–≤ + –ø–æ–∏—Å–∫\n‚Ä¢ –∫–Ω–æ–ø–∫–∞ ¬´–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å¬ª\n‚Ä¢ –æ—Ç–º–µ—Ç–∫–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞\n‚Ä¢ –æ—Ç–∫—Ä—ã—Ç–∏–µ –ø–æ—Å—Ç–æ–≤ –∫–∞–Ω–∞–ª–∞\n‚Ä¢ –∞–¥–º–∏–Ω-—Ä–µ–∂–∏–º"
          }
        ];

        contentEl.innerHTML = "";
        cards.forEach(c => {
          const div = document.createElement("div");
          div.className = "card";
          div.innerHTML = `
            <div class="row">
              <div style="font-weight:700">${c.title}</div>
            </div>
            <div class="muted" style="margin-top:8px; white-space:pre-line">${c.body}</div>
          `;
          contentEl.appendChild(div);
        });

        location.hash = key;
      }

      function renderNav() {
        navEl.innerHTML = "";
        sections.forEach(s => {
          const btn = document.createElement("button");
          btn.className = "btn";
          btn.dataset.key = s.key;
          btn.innerHTML = `<span>${s.label}</span><span class="tag">—Ä–∞–∑–¥–µ–ª</span>`;
          btn.onclick = () => { setActive(s.key); renderSection(s.key); };
          navEl.appendChild(btn);
        });
      }

      async function pingApi() {
        try {
          const r = await fetch(`${API_URL}/health`, { method: "GET" });
          if (!r.ok) throw new Error("bad status");
          pillEl.textContent = "api online";
          apiHintEl.textContent = "API –¥–æ—Å—Ç—É–ø–µ–Ω ‚úÖ";
        } catch (e) {
          pillEl.textContent = "api offline";
          apiHintEl.textContent = "API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω ‚ùå";
        }
      }

      // Telegram WebApp awareness
      const tg = window.Telegram?.WebApp;
      if (tg) {
        tgHintEl.textContent = "–û—Ç–∫—Ä—ã—Ç–æ –≤–Ω—É—Ç—Ä–∏ Telegram ‚úÖ";
        try { tg.expand(); } catch {}
      } else {
        tgHintEl.textContent = "–û—Ç–∫—Ä—ã—Ç–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ (–ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä).";
      }

      renderNav();
      const initial = (location.hash || "#prep").replace("#", "");
      setActive(initial);
      renderSection(initial);
      pingApi();
    </script>
  </body>
</html>
